{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["id", "repo", "title", "state", "timestamp"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^(WF|SEC|INF|EXP|FIX)-\\d{8}-[A-Z]{3}-\\d{4}$",
      "description": "Workflow ID in format: PREFIX-YYYYMMDD-SCOPE-SEQ"
    },
    "repo": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9-]+/[a-zA-Z0-9-_]+$",
      "description": "Repository in format: owner/repo"
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "description": "Human-readable workflow title"
    },
    "state": {
      "type": "string",
      "enum": ["Active", "Paused", "Speculative", "Archived", "Done", "Merged"],
      "description": "Workflow state (posture, not progress)"
    },
    "scope": {
      "type": "string",
      "enum": ["Local", "Service", "System", "Public", "Experimental"],
      "description": "Blast radius of changes"
    },
    "risk": {
      "type": "string",
      "enum": ["Unknown", "Low", "Medium", "High", "Critical"],
      "description": "Risk level"
    },
    "intent": {
      "type": "string",
      "enum": ["Build", "Fix", "Explore", "Research", "Deploy", "Monitor", "Deprecate", "Migrate"],
      "description": "Why this workflow exists"
    },
    "traffic_light": {
      "type": "string",
      "enum": ["ðŸŸ¢", "ðŸŸ¡", "ðŸ”´"],
      "description": "Coordination status"
    },
    "deps": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Array of dependency IDs (local or cross-repo format)"
    },
    "url": {
      "type": "string",
      "format": "uri",
      "description": "GitHub issue/PR URL"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Creation timestamp"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    }
  }
}
